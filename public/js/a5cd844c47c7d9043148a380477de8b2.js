var SR=(function(module,$){'use strict';var Validator=function(options){this.$form=$(options.form);this.status=[];this.config=options.config||[];if(options.auto){this.enable();}};Validator.prototype.enable=function(){this.$form.on('submit.sr_validator',$.proxy(this,'validateForm'));};Validator.prototype.disable=function(){this.$form.off('submit.sr_validator');};Validator.prototype.validates=function(){var validates=true,l=this.config.length,i=0,result,field,desc,descCustom,trackData;this.status=[];for(;i<l;i++){field=this.config[i].field;desc=this.config[i].desc||field;result=this.validateField(field);validates&=result.validates;if(result.validates){continue;}
if($.type(desc)==='function'){desc=desc.call(field,field.val());}
if($.type(desc)==='object'){for(var item in desc){if(desc.hasOwnProperty(item)&&item==='0'&&typeof desc[item]==='object'){if(desc[item].hasOwnProperty('tagName')&&desc[item].hasOwnProperty('name')){descCustom=desc[item].tagName.toLowerCase()+' field '+desc[item].name;}}}}
trackData={category:'Form error',action:this.$form.attr('name')?this.$form.attr('name')+':'+(descCustom?descCustom:desc):this.$form.attr('class')+':'+(descCustom?descCustom:desc),label:result.message};SR.tracking.trackEvent(trackData.category,trackData.action,trackData.label);this.status.push({field:field,message:result.message});}
return!!validates;};Validator.prototype.validateForm=function(){var validates=this.validates(),l=this.status.length,i=0,input;this.$form.find('.validate_box').removeClass("validate_box");this.$form.find('.form_validation').remove();for(;i<l;i++){this.showMessage(this.status[i].field,this.status[i].message);}
if(!validates){this._doubleCheck();$(this.status[0].field)
.filter(':first')
.focus();}
return validates;};Validator.prototype.validateField=function(field){var result={validates:true},$input=$(field),value=$input.val()||'',config=this.getFieldConfig(field),l=config.length,i=0,message,rule;for(;i<l;i++){rule=config[i].rule;message=config[i].message;if($.type(message)==='undefined')
message=this.messages[rule];if($.type(message)==='function')
message=message.call($input,value);if($.type(rule)==='string')
rule=this.rules[rule];if($.type(rule)!=='function')
throw'Rule required';if(!rule.call($input,value)){result.validates=false;result.message=message;break;}}
return result;};Validator.prototype.getFieldConfig=function(field){var i,match=false;for(i in this.config){if($(this.config[i].field).get(0)===$(field).get(0)){match=true;break;}}
if(!match){this.config.push({field:field,config:[]});i=this.config.length-1;}
return this.config[i].config;};Validator.prototype.addRule=function(field,rule,message){this.getFieldConfig(field).push({rule:rule,message:message});};Validator.prototype.showMessage=function(field,message){$(field).filter(':first')
.parent()
.parent()
.parent()
.addClass('validate_box');$(field)
.filter(':first')
.parent()
.before($('<span/>',{'class':'form_validation','text':message}));};Validator.prototype.reset=function(){this.status=[];this.config=[];return this;};Validator.prototype._doubleCheck=function(){var me=this;if(this._submitted){alert("There are one or more errors on the form.\n"
+'Please check and try again.');setTimeout(function(){me._submitted=false;},2000);}else{this._submitted=true;}};Validator.prototype.rules={required:function(str){return!!str;},email:function(str){return(/^.+@.+\..+$/).test(str);},password:function(str){return(str.length>=4);},date:function(str){return(/^\d{2}\/\d{2}\/\d{4}$/).test(str);},postcodeFirstHalf:function(str){return(/^(\w{1,2}\d{1,2})$/).test(str);},postcode:function(str){return(/^(\w{1,2}\d{1,2})(\w?\s?\d\w{2})$/).test(str);},zipcode:function(str){return(/^(\d{5})(-\d{4})?$/).test(str);}};Validator.prototype.messages={required:function(str){return'This field is required';},email:function(str){return'A valid e-mail address is required';},password:function(str){return'Passwords must be at least 4 characters long';},date:function(str){return'Please enter a date in the format '+SR.l('date_format');},postcodeFirstHalf:function(str){return'Please enter the first half of your postcode';},postcode:function(str){return'Please enter a valid UK postcode';},zipcode:function(str){return'Please enter a valid zipcode';}};module.Validator=Validator;return module;}(SR||{},jQuery));
var SR=(function(module,$){'use strict';var defaults={classes:'',content:'',width:640,height:480},Overlay=function(options){if(!arguments.length)return;options=$.extend({},defaults,options);this.$overlay=$('<div/>',{'class':'overlay','click':$.proxy(this,'close')});this.$lightbox=$('<div/>',{'class':'lightbox','click':function(event){event.stopPropagation();}});this.$content=$('<div/>',{'class':'content','html':options.content});this.$close=$('<a/>',{'class':'overlay_close','text':'x','click':$.proxy(this,'close')});this.$lightbox
.append(this.$close)
.append(this.$content);this.$overlay
.addClass(options.classes)
.append(this.$lightbox);$('body')
.append(this.$overlay);$(SR).on('pressedEscape',$.proxy(this,'close'));this.setDimensions(options.width,options.height);},Ajax=function(options,callback){Overlay.call(this,options);this.load(options.url,callback);},Iframe=function(options,callback){Overlay.call(this,options);this.load(options.url,callback);};Overlay.prototype.open=function(){this.$overlay.removeClass('overlay_inactive');this.$overlay.addClass('overlay_active');this.center();};Overlay.prototype.close=function(){this.$overlay.removeClass('overlay_active');this.$overlay.addClass('overlay_inactive');};Overlay.prototype.destroy=function(){this.$overlay.remove();};Overlay.prototype.setDimensions=function(width,height){this.$lightbox.css({'width':width+'px','height':height+'px'});};Overlay.prototype.center=function(){var $w=$(window),width=this.$lightbox.width(),height=this.$lightbox.height(),top=Math.ceil(($w.height()-height)/2),left=Math.ceil(($w.width()-width)/2);if(this.$overlay.css('position')==='absolute'){top+=$w.scrollTop();left+=$w.scrollLeft();}
this.$lightbox.css({'margin-top':top+'px','margin-left':left+'px'});};Overlay.prototype.autoFit=function(width,height){var availWidth=$(window).width(),availHeight=$(window).height(),fitWithin=availWidth,scaleDimension=width,ratio;if(availHeight<=availWidth){scaleDimension=height;fitWithin=availHeight;}
ratio=fitWithin/(scaleDimension+(fitWithin*0.5));width=Math.ceil(width*ratio);height=Math.ceil(height*ratio);this.setDimensions(width,height);this.center();};Ajax.prototype=new Overlay();Iframe.prototype=new Overlay();Ajax.prototype.load=function(url,callback){var me=this;this.$overlay.addClass('loading');this.$content.load(url,function(){me.$overlay.removeClass('loading');callback&&callback.call(me);});return this;};Iframe.prototype.load=function(url,callback){var me=this;this.$overlay.addClass('loading');this.$content.html($('<iframe/>',{'frameborder':0,'class':'content','src':url,'load':function(){me.$overlay.removeClass('loading');callback&&callback.call(me);}}));return this;};module.overlay={Overlay:Overlay,Ajax:Ajax,Iframe:Iframe};return module;}(SR||{},jQuery));
var SR=(function(module,$){'use strict';var $form,$email1,$email2,$password1,$password2,validator,overlay,confirmEmail=false,domainId=SR.settings.domainId,init=function(options){if(options!==undefined){if(options.confirmEmail!==undefined){confirmEmail=options.confirmEmail;}}
$form=$('.block_register form');$email1=$('.form_row_email input');$email2=$('.form_row_email_confirm input');$password1=$('.form_row_password input');$password2=$('.form_row_password_confirm input');addEvents();setUpValidation();},addEvents=function(){$('.form_row_agreement a').click(showOverlay);},showConfirm=function(){$(this)
.parents('.form_row')
.next('.form_row')
.slideDown('fast');},showOverlay=function(){if(!SR.overlay){return true;}
if(!(overlay instanceof SR.overlay.Iframe)){overlay=new SR.overlay.Iframe({url:'#',width:400,height:400});}
overlay.load($(this).attr('href')).open();return false;},setUpValidation=function(){var config=[{field:'.form_row_first_name input',desc:'First name',config:[{rule:'required',message:'Please enter your first name'}]},{field:'.form_row_last_name input',desc:'Last name',config:[{rule:'required',message:'Please enter your last name'}]},{field:$email1,desc:'Email',config:[{rule:'email',message:'Please enter your email address'},{rule:'email'}]},{field:$email2,desc:'Email confirmation doesn\'t match',config:[{rule:function(){if(confirmEmail){return $email1.val()===$email2.val();}
return true;},message:'Your email addresses do not match'}]},{field:$password1,desc:'Password',config:[{rule:'required',message:'Please enter a password'},{rule:'password'}]},{field:$password2,desc:'Password confirmation doesn\'t match',config:[{rule:function(){return $password1.val()===$password2.val();},message:'Your passwords do not match'}]},{field:'.form_row_user_type input:first',desc:'User type not selected',config:[{rule:function(){return($('input[name=usertype_new]:checked').length>=1||$('input[name=usertype_selection]').val()==='auto');},message:'Please select whether you have a room for '
+'rent in an existing share or if you are '
+'searching for a room...'}]},{field:'.form_row_gender input:first',desc:'Gender',config:[{rule:function(){return($('input[name=gender]:checked').length>=1);},message:'Please select your gender'}]},{field:'.form_row_posttown select',desc:'State select',config:[{rule:function(){if($.inArray(domainId,[20,135,142,170])!=-1){return($("select#posttown_id_select").val()>=1)||(!!$("[name='location']").val());}else{return true;};},message:'Please select your search area'}]}];validator=new SR.Validator({form:$form,auto:true,config:config});};module.register={init:init};return module;}(SR||{},jQuery));
(function($){var $emailfield=$('input[name="email"]');$emailfield.on('blur',function(){$(this).mailcheck({suggested:function(element,suggestion){if(!$('#email-domain-suggestion').length){var html='<p id="email-domain-suggestion">';html+='Did you mean: '+suggestion.address;html+='@<span>'+suggestion.domain+'</span>?';html+='<br><a id="email-domain-suggestion__accept">';html+='<i class="fas fa-check" aria-hidden="true"></i>';html+='</a><a id="email-domain-suggestion__reject"><i ';html+='class="far fa-times" aria-hidden="true"></i></a></p>';$(element).before(html);$('#email-domain-suggestion__accept').click(function(){$(element).val(suggestion.full);$('#email-domain-suggestion').remove();})
$('#email-domain-suggestion__reject').click(function(){$('#email-domain-suggestion').remove();})}else{$('#email-domain-suggestion span').text(suggestion.domain);}},empty:function(element){$('#email-domain-suggestion').remove();}});});})(jQuery)
